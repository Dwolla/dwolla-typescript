/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { fundingSourcesMicroDepositsGet } from "../funcs/fundingSourcesMicroDepositsGet.js";
import { fundingSourcesMicroDepositsInitiate } from "../funcs/fundingSourcesMicroDepositsInitiate.js";
import { fundingSourcesMicroDepositsVerify } from "../funcs/fundingSourcesMicroDepositsVerify.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class MicroDeposits extends ClientSDK {
  /**
   * Retrieve micro-deposits details
   *
   * @remarks
   * Returns the status and details of micro-deposits for a funding source to check verification eligibility. Includes deposit status (pending, processed, failed), creation timestamp, and failure details with ACH return codes if deposits failed. Use this endpoint to determine when micro-deposits are ready for verification.
   */
  async get(
    request: operations.GetMicroDepositsRequest,
    options?: RequestOptions,
  ): Promise<operations.GetMicroDepositsResponse> {
    return unwrapAsync(fundingSourcesMicroDepositsGet(
      this,
      request,
      options,
    ));
  }

  /**
   * Initiate micro-deposits
   *
   * @remarks
   * Initiates two small deposits to the customer's bank account for verification purposes. No request body is required.
   */
  async initiate(
    request: operations.InitiateMicroDepositsRequest,
    options?: RequestOptions,
  ): Promise<operations.InitiateMicroDepositsResponse | undefined> {
    return unwrapAsync(fundingSourcesMicroDepositsInitiate(
      this,
      request,
      options,
    ));
  }

  /**
   * Verify micro-deposits
   *
   * @remarks
   * Verifies the micro-deposit amounts received in the customer's bank account to complete funding source verification.
   */
  async verify(
    request: operations.VerifyMicroDepositsRequest,
    options?: RequestOptions,
  ): Promise<operations.VerifyMicroDepositsResponse> {
    return unwrapAsync(fundingSourcesMicroDepositsVerify(
      this,
      request,
      options,
    ));
  }
}
