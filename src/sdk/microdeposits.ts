/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { fundingSourcesMicroDepositsGetMicroDeposits } from "../funcs/fundingSourcesMicroDepositsGetMicroDeposits.js";
import { fundingSourcesMicroDepositsInitiateOrVerify } from "../funcs/fundingSourcesMicroDepositsInitiateOrVerify.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class MicroDeposits extends ClientSDK {
  /**
   * Retrieve micro-deposits details
   *
   * @remarks
   * Returns the status and details of micro-deposits for a funding source to check verification eligibility. Includes deposit status (pending, processed, failed), creation timestamp, and failure details with ACH return codes if deposits failed. Use this endpoint to determine when micro-deposits are ready for verification.
   */
  async getMicroDeposits(
    request: operations.GetMicroDepositsRequest,
    options?: RequestOptions,
  ): Promise<operations.GetMicroDepositsResponse> {
    return unwrapAsync(fundingSourcesMicroDepositsGetMicroDeposits(
      this,
      request,
      options,
    ));
  }

  /**
   * Initiate or Verify micro-deposits
   *
   * @remarks
   * Handles micro-deposit bank verification process. Make a request without a request body to initiate two small deposits to the customer's bank account. Include deposit amounts to verify the received values and complete verification.
   */
  async initiateOrVerify(
    request: operations.InitiateOrVerifyMicroDepositsRequest,
    options?: RequestOptions,
  ): Promise<operations.InitiateOrVerifyMicroDepositsResponse | undefined> {
    return unwrapAsync(fundingSourcesMicroDepositsInitiateOrVerify(
      this,
      request,
      options,
    ));
  }
}
