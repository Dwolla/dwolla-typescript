/*
 * Code originally generated by Speakeasy (https://www.speakeasy.com).
 */

import { beforeAll, expect, test } from "vitest";
import { Dwolla } from "../index.js";
import { createDwollaClient, createUnverifiedCustomer } from "./setup.js";

let dwolla: Dwolla;
let customerId: string | undefined;
beforeAll(async () => {
  dwolla = createDwollaClient("clienttokens");
  // Create an unverified customer for client token testing
  customerId = await createUnverifiedCustomer(dwolla);
}, 30000); // 30 second timeout for setup initialization

test("Clienttokens Create Client Token", async () => {

  const result = await dwolla.clientTokens.create({
    action: "customer.update",
    links: {
      customer: {
        href: `https://api-sandbox.dwolla.com/customers/${customerId}`,
      },
    },
  });
  expect(result).toBeDefined();
  expect(result.token).toBeDefined();
});
