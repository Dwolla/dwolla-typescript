/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { Dwolla } from "../index.js";
import { createTestHTTPClient } from "./testclient.js";

test("Kba Get Kba Questions", async () => {
  const testHttpClient = createTestHTTPClient("getKbaQuestions");

  const dwolla = new Dwolla({
    serverURL: "https://api-sandbox.dwolla.com",
    httpClient: testHttpClient,
    security: {
      clientID: process.env["DWOLLA_CLIENT_ID"] ?? "value",
      clientSecret: process.env["DWOLLA_CLIENT_SECRET"] ?? "value",
    },
  });

  const result = await dwolla.kba.getQuestions({
    id: "<id>",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    links: {
      answer: {
        href: "https://api.dwolla.com/kba/62dac6f3-bf8f-4961-9af8-428de8ecd9a4",
        type: "application/vnd.dwolla.v1.hal+json",
        resourceType: "kba",
      },
    },
    id: "62dac6f3-bf8f-4961-9af8-428de8ecd9a4",
    questions: [
      {
        id: "2355953375",
        text: "In what county do you currently live?",
        answers: [
          {
            id: "2687969295",
            text: "Pulaski",
          },
          {
            id: "2687969295",
            text: "Pulaski",
          },
        ],
      },
      {
        id: "2355953375",
        text: "In what county do you currently live?",
        answers: [
          {
            id: "2687969295",
            text: "Pulaski",
          },
          {
            id: "2687969295",
            text: "Pulaski",
          },
        ],
      },
      {
        id: "2355953375",
        text: "In what county do you currently live?",
        answers: [
          {
            id: "2687969295",
            text: "Pulaski",
          },
          {
            id: "2687969295",
            text: "Pulaski",
          },
        ],
      },
    ],
  });
});

test("Kba Verify Kba Questions", async () => {
  const testHttpClient = createTestHTTPClient("verifyKbaQuestions");

  const dwolla = new Dwolla({
    serverURL: "https://api-sandbox.dwolla.com",
    httpClient: testHttpClient,
    security: {
      clientID: process.env["DWOLLA_CLIENT_ID"] ?? "value",
      clientSecret: process.env["DWOLLA_CLIENT_SECRET"] ?? "value",
    },
  });

  const result = await dwolla.kba.verify({
    id: "<id>",
    requestBody: {
      answers: [
        {
          questionId: "2355953375",
          answerId: "2687969335",
        },
      ],
    },
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    links: {
      customer: {
        href:
          "https://api.dwolla.com/customers/b5fd802d-d8c7-43ce-94a8-7c14485b7042",
        type: "application/vnd.dwolla.v1.hal+json",
        resourceType: "customer",
      },
    },
    verificationStatus: "verified",
  });
});
