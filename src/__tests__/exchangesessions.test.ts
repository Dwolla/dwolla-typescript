/*
 * Code originally generated by Speakeasy (https://www.speakeasy.com).
 * 
 * Skipped: Exchange Sessions tests require Open Banking which is behind a feature flag
 * that must be manually enabled by Dwolla. These tests have been verified and work
 * correctly when the feature is enabled and appropriate resource IDs are provided.
 */

import { beforeAll, describe, expect, test } from "vitest";
import { Dwolla } from "../index.js";
import { createDwollaClient } from "./setup.js";

// Skip entire suite - Open Banking requires feature flag enabled by Dwolla
describe.skip("Exchange Sessions Tests", () => {
  let dwolla: Dwolla;

  beforeAll(async () => {
    dwolla = createDwollaClient("exchangesessions");
  }, 30000);

  test("Exchangesessions Retrieve Customer Exchange Session", async () => {
    const exchangeSessionId = "placeholder"; // Would be obtained from creating an exchange session
    
    const result = await dwolla.exchangeSessions.get({
      id: exchangeSessionId,
    });
    expect(result).toBeDefined();
    expect(result.created).toBeInstanceOf(Date);
    expect(result.links).toBeDefined();
    expect(result.links?.self).toBeDefined();
    expect(result.links?.exchangePartner).toBeDefined();
    expect(result.externalProviderSessionToken).toBeDefined();
  });
});
