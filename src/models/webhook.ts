/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../lib/primitives.js";
import { safeParse } from "../lib/schemas.js";
import { Result as SafeParseResult } from "../types/fp.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";

export type WebhookSelf = {
  href?: string | undefined;
};

export type Subscription = {
  href?: string | undefined;
};

export type WebhookRetry = {
  href?: string | undefined;
};

export type WebhookEvent = {
  href?: string | undefined;
};

export type WebhookLinks = {
  self?: WebhookSelf | undefined;
  subscription?: Subscription | undefined;
  retry?: WebhookRetry | undefined;
  event?: WebhookEvent | undefined;
};

export type RequestHeader = {
  name?: string | undefined;
  value?: string | undefined;
};

export type RequestT = {
  timestamp?: Date | undefined;
  url?: string | undefined;
  headers?: Array<RequestHeader> | undefined;
  body?: string | undefined;
};

export type ResponseHeader = {
  name?: string | undefined;
  value?: string | undefined;
};

export type ResponseT = {
  timestamp?: Date | undefined;
  headers?: Array<ResponseHeader> | undefined;
  statusCode?: number | undefined;
  body?: string | undefined;
};

export type Attempt = {
  id?: string | undefined;
  request?: RequestT | undefined;
  response?: ResponseT | undefined;
};

export type Webhook = {
  links?: WebhookLinks | undefined;
  id?: string | undefined;
  topic?: string | undefined;
  accountId?: string | undefined;
  eventId?: string | undefined;
  subscriptionId?: string | undefined;
  attempts?: Array<Attempt> | undefined;
};

/** @internal */
export const WebhookSelf$inboundSchema: z.ZodType<
  WebhookSelf,
  z.ZodTypeDef,
  unknown
> = z.object({
  href: z.string().optional(),
});

export function webhookSelfFromJSON(
  jsonString: string,
): SafeParseResult<WebhookSelf, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => WebhookSelf$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'WebhookSelf' from JSON`,
  );
}

/** @internal */
export const Subscription$inboundSchema: z.ZodType<
  Subscription,
  z.ZodTypeDef,
  unknown
> = z.object({
  href: z.string().optional(),
});

export function subscriptionFromJSON(
  jsonString: string,
): SafeParseResult<Subscription, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Subscription$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Subscription' from JSON`,
  );
}

/** @internal */
export const WebhookRetry$inboundSchema: z.ZodType<
  WebhookRetry,
  z.ZodTypeDef,
  unknown
> = z.object({
  href: z.string().optional(),
});

export function webhookRetryFromJSON(
  jsonString: string,
): SafeParseResult<WebhookRetry, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => WebhookRetry$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'WebhookRetry' from JSON`,
  );
}

/** @internal */
export const WebhookEvent$inboundSchema: z.ZodType<
  WebhookEvent,
  z.ZodTypeDef,
  unknown
> = z.object({
  href: z.string().optional(),
});

export function webhookEventFromJSON(
  jsonString: string,
): SafeParseResult<WebhookEvent, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => WebhookEvent$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'WebhookEvent' from JSON`,
  );
}

/** @internal */
export const WebhookLinks$inboundSchema: z.ZodType<
  WebhookLinks,
  z.ZodTypeDef,
  unknown
> = z.object({
  self: z.lazy(() => WebhookSelf$inboundSchema).optional(),
  subscription: z.lazy(() => Subscription$inboundSchema).optional(),
  retry: z.lazy(() => WebhookRetry$inboundSchema).optional(),
  event: z.lazy(() => WebhookEvent$inboundSchema).optional(),
});

export function webhookLinksFromJSON(
  jsonString: string,
): SafeParseResult<WebhookLinks, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => WebhookLinks$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'WebhookLinks' from JSON`,
  );
}

/** @internal */
export const RequestHeader$inboundSchema: z.ZodType<
  RequestHeader,
  z.ZodTypeDef,
  unknown
> = z.object({
  name: z.string().optional(),
  value: z.string().optional(),
});

export function requestHeaderFromJSON(
  jsonString: string,
): SafeParseResult<RequestHeader, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => RequestHeader$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'RequestHeader' from JSON`,
  );
}

/** @internal */
export const RequestT$inboundSchema: z.ZodType<
  RequestT,
  z.ZodTypeDef,
  unknown
> = z.object({
  timestamp: z.string().datetime({ offset: true }).transform(v => new Date(v))
    .optional(),
  url: z.string().optional(),
  headers: z.array(z.lazy(() => RequestHeader$inboundSchema)).optional(),
  body: z.string().optional(),
});

export function requestFromJSON(
  jsonString: string,
): SafeParseResult<RequestT, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => RequestT$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'RequestT' from JSON`,
  );
}

/** @internal */
export const ResponseHeader$inboundSchema: z.ZodType<
  ResponseHeader,
  z.ZodTypeDef,
  unknown
> = z.object({
  name: z.string().optional(),
  value: z.string().optional(),
});

export function responseHeaderFromJSON(
  jsonString: string,
): SafeParseResult<ResponseHeader, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ResponseHeader$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ResponseHeader' from JSON`,
  );
}

/** @internal */
export const ResponseT$inboundSchema: z.ZodType<
  ResponseT,
  z.ZodTypeDef,
  unknown
> = z.object({
  timestamp: z.string().datetime({ offset: true }).transform(v => new Date(v))
    .optional(),
  headers: z.array(z.lazy(() => ResponseHeader$inboundSchema)).optional(),
  statusCode: z.number().int().optional(),
  body: z.string().optional(),
});

export function responseFromJSON(
  jsonString: string,
): SafeParseResult<ResponseT, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ResponseT$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ResponseT' from JSON`,
  );
}

/** @internal */
export const Attempt$inboundSchema: z.ZodType<Attempt, z.ZodTypeDef, unknown> =
  z.object({
    id: z.string().optional(),
    request: z.lazy(() => RequestT$inboundSchema).optional(),
    response: z.lazy(() => ResponseT$inboundSchema).optional(),
  });

export function attemptFromJSON(
  jsonString: string,
): SafeParseResult<Attempt, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Attempt$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Attempt' from JSON`,
  );
}

/** @internal */
export const Webhook$inboundSchema: z.ZodType<Webhook, z.ZodTypeDef, unknown> =
  z.object({
    _links: z.lazy(() => WebhookLinks$inboundSchema).optional(),
    id: z.string().optional(),
    topic: z.string().optional(),
    accountId: z.string().optional(),
    eventId: z.string().optional(),
    subscriptionId: z.string().optional(),
    attempts: z.array(z.lazy(() => Attempt$inboundSchema)).optional(),
  }).transform((v) => {
    return remap$(v, {
      "_links": "links",
    });
  });

export function webhookFromJSON(
  jsonString: string,
): SafeParseResult<Webhook, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Webhook$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Webhook' from JSON`,
  );
}
